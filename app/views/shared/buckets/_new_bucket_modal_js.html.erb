<script>
// -------------------------------- Settings --------------------------------
// Rapid Input Field:
var rapidInput = $('#new-bucket-input');
var saveBucket = $('#save_bucket');
var cancelBucket = $('#cancel_bucket');

var bucketTemplate = "<%= escape_javascript(render partial: 'shared/buckets/bucket_template') %>";

// ---------------------------------- Events ----------------------------------
saveBucket.click(function(e){

  e.preventDefault();

  if (rapidInput.val()) {
    var bucketName = rapidInput.val();
    submitBucketWithTemplate(bucketTemplate)
    // -------------------------- Reset/Clear ---------------------------
    rapidInput.val("");
  }   
});
// ---------------------------------- Events ----------------------------------
cancelBucket.click(function(e){
  rapidInput.val("");
});

function submit() {
  $("#new_bucket").submit();
}

function submitBucketWithTemplate(template) {
  submit();
  appendBucketWithTemplate(template);
}

function appendBucketWithTemplate(template) {
  var $jQueryObject = $($.parseHTML(template));
  $jQueryObject.find('#bucket-firstname').html($("#new-bucket-input").val())
  $("#bucket-list").prepend($jQueryObject);
}
</script>