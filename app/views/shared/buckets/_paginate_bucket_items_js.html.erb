<script type="text/javascript">
  var alreadyloading = false;
  var nextpage = 1;

  var mainContainer = $(".main-content").attr("page-present");
  $(window).scroll(function() {
    if (mainContainer == "info" && $(window).scrollTop() <= 100) {
      if (alreadyloading == false) {
        alreadyloading = true;
        console.log("loading + <%= @bucket.first_name %> + " + nextpage); 
        var topItemBeforeLoad = $('.individual-item:first');
        var url = "/buckets/"+"<%= @bucket.id %>"+"/info.js?page="+nextpage;
        $.get(url, function(data) {

        }).always(function(response) {
          if (response.length > 28) { //length when no items return
            $(document).scrollTop(topItemBeforeLoad.offset().top - 50);
          };
          alreadyloading = false;
          nextpage++;
        });
      }
    }
  });
</script>
